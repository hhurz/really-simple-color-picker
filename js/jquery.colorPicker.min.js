/*
 Really Simple Color Picker in jQuery

 Copyright (c) 2008-2012
 Lakshan Perera (www.laktek.com) & Daniel Lacy (daniellacy.com)

 Modified 2016
 hhurz, https://github.com/hhurz/really-simple-color-picker

 Licensed under the MIT License, http://opensource.org/licenses/mit-license
*/
(function(a){var e,m,q=a('<div class="colorPicker-picker" tabindex="0" role="button">&nbsp;</div>'),r=a('<div id="colorPicker_palette" class="colorPicker-palette" />'),t=a('<div class="colorPicker-swatch">&nbsp;</div>'),u=a('<label for="colorPicker_hex">Hex</label>'),v=a('<input type="text" id="colorPicker_hex" />'),f;a.fn.colorPicker=function(b){return this.each(function(){for(var d=0;0<a("#colorPicker_palette-"+d).length;)d++;var c=a(this),e=a.extend({},a.fn.colorPicker.defaults,b),n=a.fn.colorPicker.toHex(0<
c.val().length?c.val():e.pickerDefault),g=q.clone(),k=r.clone().attr("id","colorPicker_palette-"+d),f=u.clone(),h=v.clone(),m=k[0].id,l,p;a.each(e.colors,function(b){l=t.clone();"transparent"===e.colors[b]?(l.addClass("transparent").text("X"),a.fn.colorPicker.bindPalette(h,l,"transparent")):(l.css("background-color","#"+this),a.fn.colorPicker.bindPalette(h,l));l.appendTo(k)});f.attr("for","colorPicker_hex-"+d);h.attr({id:"colorPicker_hex-"+d,value:n});h.bind("keydown",function(b){if(13===b.keyCode){var d=
a.fn.colorPicker.toHex(a(this).val());a.fn.colorPicker.changeColor(d?d:c.val())}27===b.keyCode&&a.fn.colorPicker.hidePalette()});h.bind("keyup",function(b){b=a.fn.colorPicker.toHex(a(b.target).val());a.fn.colorPicker.previewColor(b?b:c.val())});a('<div class="colorPicker_hexWrap" />').append(f).appendTo(k);k.find(".colorPicker_hexWrap").append(h);!1===e.showHexField&&(h.hide(),f.hide());a("body").append(k);k.hide();g.css("background-color",n);g.bind("click",function(){c.is(":not(:disabled)")&&a.fn.colorPicker.togglePalette(a("#"+
m),a(this))});g.bind("keydown",function(a){13===a.keyCode&&g.trigger("click")});b&&b.onColorChange?g.data("onColorChange",b.onColorChange):g.data("onColorChange",function(){});(p=c.data("text"))&&g.html(p);c.after(g);c.bind("change",function(){c.next(".colorPicker-picker").css("background-color",a.fn.colorPicker.toHex(a(this).val()))});c.val(n);if("input"===c[0].tagName.toLowerCase())try{c.attr("type","hidden")}catch(w){c.css("visibility","hidden").css("position","absolute")}else c.hide()})};a.extend(!0,
a.fn.colorPicker,{toHex:function(a){if(a.match(/[0-9A-F]{6}|[0-9A-F]{3}$/i))return"#"===a.charAt(0)?a:"#"+a;if(a.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/)){var d=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)],c=function(a){if(2>a.length)for(var b=0,c=2-a.length;b<c;b++)a="0"+a;return a};if(3===d.length){a=c(d[0].toString(16));var e=c(d[1].toString(16)),d=c(d[2].toString(16));return"#"+a+e+d}}else return!1},checkMouse:function(b,d){var c=m,f=a(b.target).parents("#"+
c.attr("id")).length;b.target===a(c)[0]||b.target===e[0]||0<f||a.fn.colorPicker.hidePalette()},hidePalette:function(){a(document).unbind("mousedown",a.fn.colorPicker.checkMouse);a(".colorPicker-palette").hide()},showPalette:function(b){var d=e.prev("input").val();b.css({top:e.offset().top+e.outerHeight(),left:e.offset().left});a("#color_value").val(d);b.show();a(document).bind("mousedown",a.fn.colorPicker.checkMouse)},togglePalette:function(b,d){d&&(e=d);m=b;m.is(":visible")?a.fn.colorPicker.hidePalette():
a.fn.colorPicker.showPalette(b)},changeColor:function(b){e.css("background-color",b);e.prev("input").val(b).change();a.fn.colorPicker.hidePalette();e.data("onColorChange").call(e,a(e).prev("input").attr("id"),b)},previewColor:function(a){e.css("background-color",a)},bindPalette:function(b,d,c){c=c?c:a.fn.colorPicker.toHex(d.css("background-color"));d.bind({click:function(b){f=c;a.fn.colorPicker.changeColor(c)},mouseover:function(d){f=b.val();a(this).css("border-color","#598FEF");b.val(c);a.fn.colorPicker.previewColor(c)},
mouseout:function(c){a(this).css("border-color","#000");b.val(e.css("background-color"));b.val(f);a.fn.colorPicker.previewColor(f)}})}});a.fn.colorPicker.defaults={pickerDefault:"FFFFFF",colors:"000000 993300 333300 000080 333399 333333 800000 FF6600 808000 008000 008080 0000FF 666699 808080 FF0000 FF9900 99CC00 339966 33CCCC 3366FF 800080 999999 FF00FF FFCC00 FFFF00 00FF00 00FFFF 00CCFF 993366 C0C0C0 FF99CC FFCC99 FFFF99 CCFFFF 99CCFF FFFFFF".split(" "),addColors:[],showHexField:!0}})(jQuery);
